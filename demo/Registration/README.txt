WARNING: Read ELASTIX.txt in order to check whether Elastix is correctly installed and all of its ambient variables are correctly set.

There is a python script to register set of images automatically.
All file related to that are in ift_dir/demo/Registration/reg_script/

All programs have been developed for Multiple Label Images.

1) Program iftRegisterImageByElastix.c register one (gray) image on to another one (reference) using the Elastix program.
- Program accepts Affine Registration (only affine parameter is passed) or Deformable Registration (both affine and bspline
- parameters are passed).
- Be sure that the last elastix registration files has the following options:
(WriteResultImage "true")
(ResultImageFormat "hdr")

- Available files:
-> For affine registration, use:
    ./ElastixParamFiles/Default0affine.txt OR
    ./ElastixParamFiles/Par0000affine.txt
-> For non-rigid (deformable) registration:
    ./ElastixParamFiles/Par0000affine.txt
    ./ElastixParamFiles/Par0000bspline.txt

E.g.:
# Affine registration
iftRegisterImageByElastix -m moving_image.nii.gz -f fixed_image.nii.gz -o registered_image.nii.gz --t0 ./ElastixParamFiles/Par0000affine.txt

# Affine registration on masked regions
iftRegisterImageByElastix -m moving_image.nii.gz -v moving_mask.nii.gz -f fixed_image.nii.gz -x fixed_mask.nii.gz -o registered_image.nii.gz --t0 ./ElastixParamFiles/Par0000affine.txt

# Deformable registration
iftRegisterImageByElastix -m moving_image.nii.gz -f template.nii.gz -o registered_image.nii.gz --t0 ./ElastixParamFiles/Par0000affine.txt --t1 ./ElastixParamFiles/Par0000bspline.txt

# Affine registration on masked regions
iftRegisterImageByElastix -m moving_image.nii.gz -v moving_mask.nii.gz -f fixed_image.nii.gz -x fixed_mask.nii.gz -o registered_image.nii.gz --t0 ./ElastixParamFiles/Par0000affine.txt --t1 ./ElastixParamFiles/Par0000bspline.txt


2) Program iftRegisterImageSetByElastix.c register a set of (gray) images from a directory or a CSV file on to another (gray) image using the Elastix program.

E.g.:
# Affine registration
iftRegisterImageSetByElastix -m moving_image_entry.csv(or directory) -f fixed_image.nii.gz -o output_directory --t0 ./ElastixParamFiles/Par0000affine.txt

# Deformable registration
iftRegisterImageSetByElastix -m moving_image_entry.csv(or directory) -f fixed_image.nii.gz -o output_directory --t0 ./ElastixParamFiles/Par0000affine.txt --t1 ./ElastixParamFiles/Par0000bspline.txt


3) Program iftTransformImageByTransformix transforms/maps an image (or label image) to a reference space, by using Transformix program.
Deformation Fields should be the ones are generated by (1).

E.g.:
# Affine registration
iftTransformImageByTransformix -i moving_mask_or_image_to_be_transformed.nii.gz -t xxx_DefFields.0.txt  # last resulting deformation file that comes from iftRegisterImageSetByElastix

# Deformable registration
iftTransformImageByTransformix -i moving_mask_or_image_to_be_transformed.nii.gz -t xxx_DefFields.1.txt  # last resulting deformation file that comes from iftRegisterImageSetByElastix


4) Program iftTransformImageSetByTransformix transforms/maps a set images (or label images) to a reference space, by using Transformix program.
Deformation Fields should be the ones are generated by (2).

E.g.:
# Affine registration
iftTransformImageSetByTransformix -i dir_or_csv_with_the_images_to_be_transformed -t directory_with_deformation_fields -o output_dir

